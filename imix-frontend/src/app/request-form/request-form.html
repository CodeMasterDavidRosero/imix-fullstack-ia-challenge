<section class="request-shell">
  <div class="request-card">
    <header class="request-header">
      <p class="eyebrow">Imix Intake</p>
      <h2>Nueva Solicitud</h2>
      <p class="subtitle">Completa tus datos y describe el requerimiento para procesarlo con IA.</p>
    </header>

    <form class="request-form" (ngSubmit)="enviar()" #formRef="ngForm">
      <label class="field">
        <span>Nombre completo</span>
        <input
          [(ngModel)]="request.fullName"
          name="fullName"
          placeholder="Ej: David Mirada"
          required
        />
      </label>

      <label class="field">
        <span>Correo electronico</span>
        <input
          [(ngModel)]="request.email"
          name="email"
          type="email"
          placeholder="Ej: nombre@correo.com"
          required
        />
      </label>

      <label class="field">
        <span>Telefono</span>
        <input
          [(ngModel)]="request.phone"
          name="phone"
          type="tel"
          placeholder="Ej: 3001234567"
          required
        />
      </label>

      <label class="field">
        <span>Servicio</span>
        <input
          [(ngModel)]="request.service"
          name="service"
          placeholder="Ej: Integracion API y soporte"
          required
        />
      </label>

      <label class="field">
        <span>Mensaje</span>
        <textarea
          [(ngModel)]="request.message"
          name="message"
          rows="5"
          placeholder="Detalla contexto, objetivos y urgencia"
          required
        ></textarea>
      </label>

      <button type="submit" [disabled]="loading() || formRef.invalid">
        {{ loading() ? 'Procesando...' : 'Enviar a IA' }}
      </button>
    </form>

    <div *ngIf="loading()" class="status status--loading">
      <p>Procesando con IA. Espera un momento.</p>
    </div>

    <div *ngIf="error()" class="status status--error" role="alert" aria-live="assertive">
      <p>{{ error() }}</p>
    </div>

    <div *ngIf="response() as response" class="status status--result">
      <h3>Resultado del Procesamiento</h3>
      <p>{{ response.aiEnrichment }}</p>
      <small>Estado: {{ response.status }}</small>
    </div>
  </div>
</section>
